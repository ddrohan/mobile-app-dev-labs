
<!DOCTYPE html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />

  <title> Lab 3: Part (B) CoffeeMate 3.0 - Filters & Spinners </title>
  
    <style type="text/css">
    table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
      margin: 0; padding: 0; vertical-align: baseline; border: none; }
    table.sourceCode { width: 100%; line-height: 100%; }
    td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
    td.sourceCode { padding-left: 5px; }
    code > span.kw { color: #007020; font-weight: bold; }
    code > span.dt { color: #902000; }
    code > span.dv { color: #40a070; }
    code > span.bn { color: #40a070; }
    code > span.fl { color: #40a070; }
    code > span.ch { color: #4070a0; }
    code > span.st { color: #4070a0; }
    code > span.co { color: #60a0b0; font-style: italic; }
    code > span.ot { color: #007020; }
    code > span.al { color: #ff0000; font-weight: bold; }
    code > span.fu { color: #06287e; }
    code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  
  <link rel="stylesheet" href="./style/bootstrap.min.css" type="text/css">  
  <link rel="stylesheet" href="./style/clarity.css" type="text/css"> 

  <link rel="stylesheet" href="./style/highlight.css">
  <script src="./style/highlight.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>

<body>
  <div class="container-fluid">

    <!----------------------------------------------------------------------------------------->
   <style> body  { padding-top: 60px; } </style>    <div class="navbar navbar-fixed-top">
      <p id="title">Lab 3: Part (B) CoffeeMate 3.0 - Filters & Spinners&nbsp;&nbsp;</p>
      <div class="navbar-inner">
        <ul class="nav">
          <li><a href="objectives.html">Objectives</a></li>
          <li><a href="step01.html">01</a></li>
          <li><a href="step02.html">02</a></li>
          <li><a href="step03.html">03</a></li>
          <li><a href="step04.html">04</a></li>
          <li><a href="step05.html">05</a></li>
          <li class="active"><a href="step06.html">06</a></li>
          <li><a href="step07.html">07</a></li>
          <li><a href="exercises.html">Exercises</a></li>
        </ul>
        <p class="navbar-text pull-right"> <a href="http://www.jumpyjosh.com/wit/androidy5/practicals/default.html"> Mobile Application Development 'MAD'</a> &nbsp; &nbsp;</p>
      </div>
    </div>
    <!----------------------------------------------------------------------------------------->


<h1 id="reusing-fragments---adding-event-handlers">Reusing Fragments - Adding Event Handlers</h1>
<p>At the moment, if the user types in some text or selects an option from the Spinner on the Search screen, nothings happens as there's no code attached to these types of events. This step involves implementing the necessary interfaces to complete the lab.</p>
<p>If you haven't been doing so already, you should definitely make use of the Eclipse features to speed up this process, so all we will be left with is writing the specific code for what we want to happen.</p>
<h1 id="handling-the-spinner-with-the-onitemselectedlistener-interface">Handling the Spinner with the <u>OnItemSelectedListener</u> interface</h1>
<p>First of all, ensure your <b>SearchFragment</b> implements the correct interface and import it like so (by moving your mouse over the interface name):</p>
<div class="figure">
<img src="../img/lab0409.png" />
</div>
<p>Next, your fragment class name will show an error (have a red underline) so, if you move your mouse over the class name you'll have the option of implementing and overriding the necessary methods:</p>
<div class="figure">
<img src="../img/lab0410.png" />
</div>
<p>and you get the following:</p>
<pre class="sourceCode java"><code class="sourceCode java">  <span class="fu">@Override</span>
  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onItemSelected</span>(AdapterView&lt;?&gt; arg0, View arg1, <span class="dt">int</span> arg2, <span class="dt">long</span> arg3) {
    <span class="co">// TODO Auto-generated method stub</span>
    
  }

  <span class="fu">@Override</span>
  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onNothingSelected</span>(AdapterView&lt;?&gt; arg0) {
    <span class="co">// TODO Auto-generated method stub</span>
    
  }</code></pre>
<p>We only need to complete the <i>onItemSelected</i> method to filter our list when the user selects a particular 'type' of coffee, as follows:</p>
<pre class="sourceCode java"><code class="sourceCode java">  String selected = arg0.<span class="fu">getItemAtPosition</span>(arg2).<span class="fu">toString</span>();

    <span class="kw">if</span> (selected != <span class="kw">null</span>) {
      <span class="kw">if</span> (selected.<span class="fu">equals</span>(<span class="st">&quot;All Types&quot;</span>)) {
        coffeeFilter.<span class="fu">setFilter</span>(<span class="st">&quot;all&quot;</span>);
      } <span class="kw">else</span> <span class="kw">if</span> (selected.<span class="fu">equals</span>(<span class="st">&quot;Favourites&quot;</span>)) {
        coffeeFilter.<span class="fu">setFilter</span>(<span class="st">&quot;favourites&quot;</span>);
      }
      coffeeFilter.<span class="fu">filter</span>(<span class="st">&quot;&quot;</span>);
    }</code></pre>
<p>Once again, be clear about what is going here. The last thing to do is set the spinners listener, so have a go at this method call. If you like, you can run the app, just to see if this works like it should.</p>
<h1 id="handling-the-edittext-with-the-textwatcher-interface">Handling the EditText with the <u>TextWatcher</u> interface</h1>
<p>Similar to handling the <b><i>Spinner</i></b> try and use the Eclipse features to implement the <b><i>TextWatcher</i></b> interface. If you've done this correctly you'll have the following method stubs:</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="fu">@Override</span>
  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">afterTextChanged</span>(Editable s) {
    <span class="co">// TODO Auto-generated method stub</span>
    
  }

  <span class="fu">@Override</span>
  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">beforeTextChanged</span>(CharSequence s, <span class="dt">int</span> start, <span class="dt">int</span> count,
      <span class="dt">int</span> after) {
    <span class="co">// TODO Auto-generated method stub</span>
    
  }

  <span class="fu">@Override</span>
  <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onTextChanged</span>(CharSequence s, <span class="dt">int</span> start, <span class="dt">int</span> before, <span class="dt">int</span> count) {
    <span class="co">// TODO Auto-generated method stub</span>
    
  }</code></pre>
<p>There's actually very little code necessary to implement this feature, so see if you can complete this final step without referring to the lecture material.</p>
<p>HINT: the <i>filter</i> method of our coffee filter takes a String to filter on and you need to add the relevant listener to the <b><i>EditText</i></b>.</p>
<p>Once you have that up and running you should be seeing something like this:</p>
<p><img src="../img/lab0407.png" /> <img src="../img/lab0412.png" /></p>


      <!----------------------------------------------------------------------------------------->
      <div id="footer">
        <p id="footertext">
          Prepared by  David Drohan (ddrohan@wit.ie). Except where otherwise noted, this content is licensed under a 
          <a class="externalLink" href="http://creativecommons.org/licenses/by-nc/3.0/" 
            title="External link to http://creativecommons.org/licenses/by-nc/3.0/" 
            target="_blank">Creative Commons Attribution-NonCommercial 3.0 License
          </a>
        </p>
      </div>

    </div>
  </body>
</html>
 


<!DOCTYPE html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />

  <title> Lab 3: Part (B) CoffeeMate 3.0 - Filters & Spinners </title>
  
    <style type="text/css">
    table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
      margin: 0; padding: 0; vertical-align: baseline; border: none; }
    table.sourceCode { width: 100%; line-height: 100%; }
    td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
    td.sourceCode { padding-left: 5px; }
    code > span.kw { color: #007020; font-weight: bold; }
    code > span.dt { color: #902000; }
    code > span.dv { color: #40a070; }
    code > span.bn { color: #40a070; }
    code > span.fl { color: #40a070; }
    code > span.ch { color: #4070a0; }
    code > span.st { color: #4070a0; }
    code > span.co { color: #60a0b0; font-style: italic; }
    code > span.ot { color: #007020; }
    code > span.al { color: #ff0000; font-weight: bold; }
    code > span.fu { color: #06287e; }
    code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  
  <link rel="stylesheet" href="./style/bootstrap.min.css" type="text/css">  
  <link rel="stylesheet" href="./style/clarity.css" type="text/css"> 

  <link rel="stylesheet" href="./style/highlight.css">
  <script src="./style/highlight.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>

<body>
  <div class="container-fluid">

    <!----------------------------------------------------------------------------------------->
   <style> body  { padding-top: 60px; } </style>    <div class="navbar navbar-fixed-top">
      <p id="title">Lab 3: Part (B) CoffeeMate 3.0 - Filters & Spinners&nbsp;&nbsp;</p>
      <div class="navbar-inner">
        <ul class="nav">
          <li><a href="objectives.html">Objectives</a></li>
          <li><a href="step01.html">01</a></li>
          <li><a href="step02.html">02</a></li>
          <li><a href="step03.html">03</a></li>
          <li><a href="step04.html">04</a></li>
          <li class="active"><a href="step05.html">05</a></li>
          <li><a href="step06.html">06</a></li>
          <li><a href="step07.html">07</a></li>
          <li><a href="exercises.html">Exercises</a></li>
        </ul>
        <p class="navbar-text pull-right"> <a href="http://www.jumpyjosh.com/wit/androidy5/practicals/default.html"> Mobile Application Development 'MAD'</a> &nbsp; &nbsp;</p>
      </div>
    </div>
    <!----------------------------------------------------------------------------------------->


<h1 id="reusing-fragments---searching-coffees">Reusing Fragments - Searching Coffees</h1>
<p>We now have a Fragment that has filtering capabilities so we use these to search our list of coffees and refine the list based on either the coffees name, it's type, or both. To achieve this, we'll subclass our existing <b><i>CoffeeFragment</i></b> and create new class called <b><i>SearchFragment</i></b> and assocaiate this Fragment with our <b>Search.java</b> Activity class.</p>
<h1 id="searchfragment.java">SearchFragment.java</h1>
<p>Have a quick look at the existing <b><i>SearchFragment</i></b> class:</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">public</span> <span class="kw">class</span> SearchFragment <span class="kw">extends</span> CoffeeFragment
         {
    <span class="fu">@Override</span>
    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAttach</span>(Activity activity) {
        <span class="kw">super</span>.<span class="fu">onAttach</span>(activity);
    }

    <span class="fu">@Override</span>
    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCreate</span>(Bundle savedInstanceState) {
        <span class="kw">super</span>.<span class="fu">onCreate</span>(savedInstanceState);
    }

    <span class="fu">@Override</span>
    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onStart</span>() {
        <span class="kw">super</span>.<span class="fu">onStart</span>();
    }
}</code></pre>
<p>There's not much in there, so the first thing we'll do is add some choices to the Spinner so the user can filter on a 'type'.</p>
<p>We'll use an Adapter to populate the Spinner data so have a go at completing the following:</p>
<p>First, create the Adapter</p>
<pre class="sourceCode java"><code class="sourceCode java">    ArrayAdapter&lt;CharSequence&gt; spinnerAdapter = ArrayAdapter
                .<span class="fu">createFromResource</span>(<span class="co">/*activity reference*/</span>, <span class="co">/*the options to display*/</span>,
                        android.<span class="fu">R</span>.<span class="fu">layout</span>.<span class="fu">simple_spinner_item</span>);

    spinnerAdapter
        .<span class="fu">setDropDownViewResource</span>(android.<span class="fu">R</span>.<span class="fu">layout</span>.<span class="fu">simple_spinner_dropdown_item</span>);</code></pre>
<p>Next, bind to the Spinner widget of the layout</p>
<pre class="sourceCode java"><code class="sourceCode java">    Spinner spinner = <span class="co">/*Bind to the spinner widget R.id.searchCoffeeTypeSpinner*/</span>;</code></pre>
<p>and finally, set the Spinners adapter to the adapter you've set up (<i>spinnerAdapter</i>).</p>
<p>If you run your app again, you would expect to see the Spinner showing data - but it does not. Can you work out what the issue is? (HINT: Have a look at the <b>Search.java</b> Activity class and the type of Fragment being loaded)</p>
<p>If you've spotted what needed to be changed, run the app one more time and you should now be seeing something like this when you click on the Spinner.</p>
<p><img src="../img/lab0407.png" /> and <img src="../img/lab0408.png" /></p>
<p>The last step is to add the listeners for the <b><i>Spinner</i></b> and <b><i>EditText</i></b> widgets to filter the list on the users selections.</p>


      <!----------------------------------------------------------------------------------------->
      <div id="footer">
        <p id="footertext">
          Prepared by  David Drohan (ddrohan@wit.ie). Except where otherwise noted, this content is licensed under a 
          <a class="externalLink" href="http://creativecommons.org/licenses/by-nc/3.0/" 
            title="External link to http://creativecommons.org/licenses/by-nc/3.0/" 
            target="_blank">Creative Commons Attribution-NonCommercial 3.0 License
          </a>
        </p>
      </div>

    </div>
  </body>
</html>
 
